<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="499px" preserveAspectRatio="none" style="width:550px;height:499px;" version="1.1" viewBox="0 0 550 499" width="550px" zoomAndPan="magnify"><defs><filter height="300%" id="f1otfoeqgd6sb3" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--entity api--><ellipse cx="254.5" cy="125" fill="#FEFECE" filter="url(#f1otfoeqgd6sb3)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="20" x="244.5" y="154.9951">api</text><!--entity portal--><rect fill="#FEFECE" filter="url(#f1otfoeqgd6sb3)" height="36.2969" style="stroke: #A80036; stroke-width: 1.5;" width="59" x="251" y="8"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="246" y="13"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="246" y="34.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="39" x="261" y="30.9951">portal</text><path d="M103,105 L103,145.2656 A0,0 0 0 0 103,145.2656 L210,145.2656 A0,0 0 0 0 210,145.2656 L210,129 L245.48,125 L210,121 L210,115 L200,105 L103,105 A0,0 0 0 0 103,105 " fill="#FBFB77" filter="url(#f1otfoeqgd6sb3)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M200,105 L200,115 L210,115 L200,105 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="86" x="109" y="122.0669">confirm order</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="70" x="109" y="137.1997">(write side)</text><!--entity order-service--><rect fill="#FEFECE" filter="url(#f1otfoeqgd6sb3)" height="36.2969" style="stroke: #A80036; stroke-width: 1.5;" width="111" x="68" y="237"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="63" y="242"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="63" y="263.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="91" x="78" y="259.9951">order-service</text><path d="M214,242.5 L214,251 L179.0156,255 L214,259 L214,267.6328 A0,0 0 0 0 214,267.6328 L337,267.6328 A0,0 0 0 0 337,267.6328 L337,252.5 L327,242.5 L214,242.5 A0,0 0 0 0 214,242.5 " fill="#FBFB77" filter="url(#f1otfoeqgd6sb3)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M327,242.5 L327,252.5 L337,252.5 L327,242.5 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="102" x="220" y="259.5669">confirmed order</text><!--entity cassandra--><rect fill="#FEFECE" filter="url(#f1otfoeqgd6sb3)" height="36.2969" style="stroke: #A80036; stroke-width: 1.5;" width="91" x="44" y="365"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="39" y="370"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="39" y="391.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="71" x="54" y="387.9951">cassandra</text><path d="M6,462 L6,487.1328 A0,0 0 0 0 6,487.1328 L169,487.1328 A0,0 0 0 0 169,487.1328 L169,472 L159,462 L91.7785,462 L89.1049,401.0775 L83.7785,462 L6,462 A0,0 0 0 0 6,462 " fill="#FBFB77" filter="url(#f1otfoeqgd6sb3)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M159,462 L159,472 L169,472 L159,462 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="142" x="12" y="479.0669">order confirmed event</text><!--entity kafka--><rect fill="#FEFECE" filter="url(#f1otfoeqgd6sb3)" height="36.2969" style="stroke: #A80036; stroke-width: 1.5;" width="56" x="257.5" y="365"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="252.5" y="370"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="252.5" y="391.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="36" x="267.5" y="387.9951">kafka</text><path d="M204,462 L204,487.1328 A0,0 0 0 0 204,487.1328 L367,487.1328 A0,0 0 0 0 367,487.1328 L367,472 L357,462 L289.5,462 L285.5,401.0775 L281.5,462 L204,462 A0,0 0 0 0 204,462 " fill="#FBFB77" filter="url(#f1otfoeqgd6sb3)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M357,462 L357,472 L367,472 L357,462 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="142" x="210" y="479.0669">order confirmed event</text><!--entity search_api--><ellipse cx="370.5" cy="125" fill="#FEFECE" filter="url(#f1otfoeqgd6sb3)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="20" x="360.5" y="154.9951">api</text><path d="M415,105 L415,121 L379.6094,125 L415,129 L415,145.2656 A0,0 0 0 0 415,145.2656 L538,145.2656 A0,0 0 0 0 538,145.2656 L538,115 L528,105 L415,105 A0,0 0 0 0 415,105 " fill="#FBFB77" filter="url(#f1otfoeqgd6sb3)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M528,105 L528,115 L538,115 L528,105 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="102" x="421" y="122.0669">confirmed order</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="66" x="421" y="137.1997">(read site)</text><!--entity order-search-service--><rect fill="#FEFECE" filter="url(#f1otfoeqgd6sb3)" height="36.2969" style="stroke: #A80036; stroke-width: 1.5;" width="163" x="372" y="237"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="367" y="242"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="367" y="263.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="143" x="382" y="259.9951">order-search-service</text><!--entity elasticsearch--><rect fill="#FEFECE" filter="url(#f1otfoeqgd6sb3)" height="36.2969" style="stroke: #A80036; stroke-width: 1.5;" width="111" x="407" y="365"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="402" y="370"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="402" y="391.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="91" x="417" y="387.9951">elasticsearch</text><path d="M402,462 L402,487.1328 A0,0 0 0 0 402,487.1328 L525,487.1328 A0,0 0 0 0 525,487.1328 L525,472 L515,462 L467.3608,462 L462.6976,401.0775 L459.3608,462 L402,462 A0,0 0 0 0 402,462 " fill="#FBFB77" filter="url(#f1otfoeqgd6sb3)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M515,462 L515,472 L525,472 L515,462 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="102" x="408" y="479.0669">confirmed order</text><!--link portal to api--><path d="M275.7312,44.1581 C270.6826,63.3816 262.8205,93.3183 258.2136,110.8599 " fill="none" id="portal-api" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="256.8951,115.8803,263.0501,108.1916,258.1652,111.0443,255.3126,106.1594,256.8951,115.8803" style="stroke: #A80036; stroke-width: 1.0;"/><!--link api to order-service--><path d="M245.4958,133.9354 C224.2233,155.0456 170.5068,208.3521 141.9739,236.6671 " fill="none" id="api-order-service" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="87" x="202.5" y="188.0669">commands &amp;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="74" x="209" y="203.1997">websockets</text><!--link order-service to cassandra--><path d="M118.7007,273.0678 C112.6853,295.7142 102.3621,334.5779 95.7392,359.5114 " fill="none" id="order-service-cassandra" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="94.3849,364.6096,100.5615,356.9382,95.6686,359.7772,92.8297,354.8843,94.3849,364.6096" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="94" x="112.5" y="323.5669">event sourcing</text><!--link order-service to kafka--><path d="M166.2457,273.1939 C182.4824,281.1302 200.6312,291.3063 215.5,303 C236.6294,319.6173 256.3757,343.2233 269.4726,360.4857 " fill="none" id="order-service-kafka" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="272.6559,364.7297,270.4553,355.1298,269.6556,360.7299,264.0556,359.9302,272.6559,364.7297" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="43" x="248.5" y="323.5669">events</text><!--link portal to search_api--><path d="M297.0074,44.1581 C314.7845,63.713 342.6398,94.3538 358.46,111.7561 " fill="none" id="portal-search_api" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="362.2094,115.8803,359.115,106.5302,358.846,112.1806,353.1956,111.9116,362.2094,115.8803" style="stroke: #A80036; stroke-width: 1.0;"/><!--link search_api to order-search-service--><path d="M376.4692,134.3493 C390.1478,155.7737 423.9576,208.7288 441.8937,236.8214 " fill="none" id="search_api-order-search-service" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="47" x="422.5" y="195.5669">queries</text><!--link order-search-service to kafka--><path d="M429.786,273.0678 C399.2298,296.3487 346.179,336.7683 313.6221,361.5736 " fill="none" id="order-search-service-kafka" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="309.3648,364.8173,318.9478,362.5445,313.3419,361.787,314.0994,356.1811,309.3648,364.8173" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="43" x="389.5" y="323.5669">events</text><!--link order-search-service to elasticsearch--><path d="M454.7704,273.0678 C456.3627,295.7142 459.0953,334.5779 460.8485,359.5114 " fill="none" id="order-search-service-elasticsearch" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="461.2069,364.6096,464.5657,355.3512,460.8562,359.6219,456.5855,355.9123,461.2069,364.6096" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="49" x="459.5" y="316.0669">index &amp;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="47" x="460.5" y="331.1997">queries</text><!--
@startuml
() "api" as api
[portal] ..> api
note left: confirm order\n(write side)

[order-service]
note left: confirmed order
api - - [order-service]: commands &\nwebsockets

[cassandra]
note bottom: order confirmed event
[order-service] ..> [cassandra]: event sourcing

[kafka]
note bottom: order confirmed event
[order-service] ..> kafka: events

() "api" as search_api
[portal] ..> search_api
note right: confirmed order\n(read site)

[order-search-service]
search_api - - [order-search-service]: queries
[order-search-service] ..> kafka: events

[elasticsearch]
note bottom: confirmed order
[order-search-service] ..> [elasticsearch]: index &\nqueries
@enduml

PlantUML version 1.2018.11(Sat Sep 22 18:43:53 CEST 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_152-release-1248-b22
Operating System: Linux
OS Version: 4.15.0-38-generic
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>